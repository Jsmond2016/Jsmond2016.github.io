(window.webpackJsonp=window.webpackJsonp||[]).push([[99],{436:function(t,a,n){"use strict";n.r(a);var s=n(0),e=Object(s.a)({},(function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("p",[t._v("参考文档 :")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://cn.vuejs.org/v2/guide/components.html#%E7%BB%84%E4%BB%B6%E7%BB%84%E5%90%88",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vue 组件组合"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://cn.vuejs.org/v2/guide/components.html#%E4%BD%BF%E7%94%A8-Prop-%E4%BC%A0%E9%80%92%E6%95%B0%E6%8D%AE",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用 props传递数据"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://cn.vuejs.org/v2/guide/components.html#%E4%BD%BF%E7%94%A8-v-on-%E7%BB%91%E5%AE%9A%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6",target:"_blank",rel:"noopener noreferrer"}},[t._v("用v-on 绑定事件"),n("OutboundLink")],1)])]),t._v(" "),n("p",[t._v("原理：")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://i.loli.net/2018/03/15/5aaa908be9564.png",alt:""}})]),t._v(" "),n("h2",{attrs:{id:"父子组件之间通信"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#父子组件之间通信"}},[t._v("#")]),t._v(" 父子组件之间通信")]),t._v(" "),n("p",[t._v("例子代码 "),n("a",{attrs:{href:"http://jsbin.com/lakereliki/1/edit?html,js,output",target:"_blank",rel:"noopener noreferrer"}},[t._v("Demo"),n("OutboundLink")],1)]),t._v(" "),n("blockquote",[n("p",[t._v("目的：点击打开显示 "),n("code",[t._v("div.son")]),t._v("，点击关闭隐藏 "),n("code",[t._v("div.son")])])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://i.loli.net/2018/03/14/5aa93ff82475d.gif",alt:""}})]),t._v(" "),n("p",[t._v("我们可以看到，父元素里面有一个子元素，使用在父元素中点击按钮控制子元素的展现和隐藏。")]),t._v(" "),n("p",[t._v("但是，"),n("strong",[t._v("在子元素中却无法对自己进行操作，因为它的显示是由它父元素决定。而 "),n("code",[t._v("button")]),t._v(" 无法控制 "),n("code",[t._v("child")])]),t._v("。")]),t._v(" "),n("p",[t._v("此时，解决办法为：")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("在"),n("code",[t._v("button")]),t._v("元素中添加事件，"),n("code",[t._v("<button @click=\"$emit('close')\">关闭</button>")])])]),t._v(" "),n("li",[n("p",[t._v("父元素"),n("code",[t._v("child")]),t._v("中添加监听，"),n("code",[t._v('<child v-show="visible" @close="visible=!visible"></child>')])])]),t._v(" "),n("li",[n("p",[t._v("代码为： "),n("a",{attrs:{href:"http://jsbin.com/dasajenaje/1/edit?html,js,output",target:"_blank",rel:"noopener noreferrer"}},[t._v("Demo"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("如图：\n​\n"),n("img",{attrs:{src:"https://i.loli.net/2018/03/14/5aa93f6d39ac9.gif",alt:""}})]),t._v(" "),n("p",[t._v("​")])])]),t._v(" "),n("h2",{attrs:{id:"爷孙组件之间通信"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#爷孙组件之间通信"}},[t._v("#")]),t._v(" 爷孙组件之间通信")]),t._v(" "),n("p",[t._v("上面我们演示了爸爸和儿子之间的通信，接下来我们来探索爷爷和儿子之间的通信")]),t._v(" "),n("blockquote",[n("p",[t._v("目的，爷爷控制孙子的状态，同时，孙子控制爷爷的状态")])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://i.loli.net/2018/03/15/5aaa8b7044c13.gif",alt:""}})]),t._v(" "),n("p",[t._v("这里，我们看到，从爷爷到孙子，中间经过了爸爸，因此，爷爷先要控制爸爸，然后爸爸控制儿子，即：")]),t._v(" "),n("ul",[n("li",[t._v("爷爷控制爸爸，爸爸控制儿子，即可实现爷爷控制孙子：\n即爷爷和爸爸之间，通过在爷爷的"),n("code",[t._v("data")]),t._v(" 中保存 "),n("code",[t._v("xxx")]),t._v(" 变量控制 孙子的显示状态 "),n("code",[t._v("visible")])]),t._v(" "),n("li",[t._v("代码为： "),n("a",{attrs:{href:"http://jsbin.com/memutulubo/1/edit?html,js,output",target:"_blank",rel:"noopener noreferrer"}},[t._v("Demo"),n("OutboundLink")],1)])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://i.loli.net/2018/03/15/5aaa8fff492a5.png",alt:""}})]),t._v(" "),n("ul",[n("li",[n("p",[t._v("同理，孙子要控制爷爷，那就要孙子告诉爸爸，爸爸再告诉爷爷，即：")]),t._v(" "),n("p",[t._v("孙子事件冒泡给爸爸，爸爸再冒泡给爷爷，使用事件监听的方式逐级冒泡")])])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://i.loli.net/2018/03/15/5aaa93b8a989b.gif",alt:""}})]),t._v(" "),n("ul",[n("li",[t._v("代码为 "),n("a",{attrs:{href:"http://jsbin.com/tocufitujo/1/edit?html,js,output",target:"_blank",rel:"noopener noreferrer"}},[t._v("Demo"),n("OutboundLink")],1)])]),t._v(" "),n("h2",{attrs:{id:"兄弟组件之间通信"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#兄弟组件之间通信"}},[t._v("#")]),t._v(" 兄弟组件之间通信")]),t._v(" "),n("p",[t._v("以下演示的是错误的答案：")]),t._v(" "),n("p",[t._v("以上实现了父子通信和爷孙通信，接下来的兄弟之间的通信就简单的多了")]),t._v(" "),n("p",[t._v("代码：  "),n("a",{attrs:{href:"http://jsbin.com/tilozegilu/1/edit?html,js,output",target:"_blank",rel:"noopener noreferrer"}},[t._v("Demo"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("效果如图")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://i.loli.net/2018/03/15/5aaa97fc2b507.gif",alt:""}})]),t._v(" "),n("p",[t._v("正确的方法为：")]),t._v(" "),n("p",[t._v("代码:"),n("a",{attrs:{href:"http://jsbin.com/woyoponibu/1/edit?html,js,output",target:"_blank",rel:"noopener noreferrer"}},[t._v("Demo"),n("OutboundLink")],1)]),t._v(" "),n("div",{staticClass:"language-html extra-class"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("app"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("component-a")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("component-a")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("component-b")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("component-b")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  \n  /*\n  vue 代码如图所示\n  */\nlet eventHub = new Vue()\nVue.prototype.$eventHub = eventHub\n\n\nVue.component('component-a',{\n  template: `\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("a"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("notify"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("button"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n`,\n  methods:{\n    notify(){\n//       this.__proto__ === Vue.prototype\n      this.$eventHub.$emit('xxx','hi')\n      console.log(12312312)\n    }\n  }\n})\n\n\nVue.component('component-b',{\n  template: `\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("b"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("ref")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v("output")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n`,\n  created(){\n    this.$eventHub.$on('xxx',(data)=>{\n      this.$refs.output.textContent = data\n    })\n  }\n})\n\nlet app = new Vue({\n  el: '#app',\n})\n  \n")])])]),n("p",[t._v("具体使用的原理类似于 发布订阅模式 ，但是这里 需要把 eventHub 绑定到 Vue 的原型上，从而使得不同的组件可以相互通信。")]),t._v(" "),n("h2",{attrs:{id:"小结："}},[n("a",{staticClass:"header-anchor",attrs:{href:"#小结："}},[t._v("#")]),t._v(" 小结：")]),t._v(" "),n("p",[t._v("我们发现，父子通信到爷孙通信 ，核心还是**“父子通信”** ，那么爷爷的爷爷和孙子的孙子通信怎么办？按照Vue的 文档要求只能从 “父子通信”出发，逐级网上冒泡或逐级往下绑定 "),n("code",[t._v("props")]),t._v("的值，特别麻烦 。")]),t._v(" "),n("p",[t._v("那么，有没有解决的办法呢？当然有，使用 "),n("code",[t._v("Redux")])]),t._v(" "),n("p",[t._v("面试官问 ：Vuex 有什么作用？")]),t._v(" "),n("p",[t._v("答：主要为了解决 爷孙通信的麻烦（简答）。")])])}),[],!1,null,null,null);a.default=e.exports}}]);