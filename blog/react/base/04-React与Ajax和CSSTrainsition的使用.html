<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React与ajax和CSSTransition的使用 | 黄同学</title>
    <meta name="description" content="A simple and beautiful vuepress blog theme .">
    <link rel="icon" href="/favicon.ico">
  <link rel="manifest" href="/manifest.json">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.9081f2d2.css" as="style"><link rel="preload" href="/assets/js/app.030edb0b.js" as="script"><link rel="preload" href="/assets/js/4.7584c211.js" as="script"><link rel="preload" href="/assets/js/1.868075c3.js" as="script"><link rel="preload" href="/assets/js/17.6ba9c659.js" as="script"><link rel="prefetch" href="/assets/js/10.b5ddafc3.js"><link rel="prefetch" href="/assets/js/100.552dabd5.js"><link rel="prefetch" href="/assets/js/101.a4cc5194.js"><link rel="prefetch" href="/assets/js/102.d7063e06.js"><link rel="prefetch" href="/assets/js/103.af983978.js"><link rel="prefetch" href="/assets/js/104.1a951dc1.js"><link rel="prefetch" href="/assets/js/105.6388597e.js"><link rel="prefetch" href="/assets/js/106.186d538d.js"><link rel="prefetch" href="/assets/js/107.0e5b1212.js"><link rel="prefetch" href="/assets/js/108.c1ef63b3.js"><link rel="prefetch" href="/assets/js/109.aecd9cea.js"><link rel="prefetch" href="/assets/js/11.a63f45e4.js"><link rel="prefetch" href="/assets/js/110.2728a88d.js"><link rel="prefetch" href="/assets/js/111.defea116.js"><link rel="prefetch" href="/assets/js/112.674116bd.js"><link rel="prefetch" href="/assets/js/113.4328a4fb.js"><link rel="prefetch" href="/assets/js/114.cd42a499.js"><link rel="prefetch" href="/assets/js/115.9c77f35b.js"><link rel="prefetch" href="/assets/js/116.2e0b8223.js"><link rel="prefetch" href="/assets/js/117.3ab96d58.js"><link rel="prefetch" href="/assets/js/118.9d37f28a.js"><link rel="prefetch" href="/assets/js/119.d8736b01.js"><link rel="prefetch" href="/assets/js/12.5d60dde7.js"><link rel="prefetch" href="/assets/js/120.91c48559.js"><link rel="prefetch" href="/assets/js/121.07c47c03.js"><link rel="prefetch" href="/assets/js/122.438d8bfe.js"><link rel="prefetch" href="/assets/js/13.154fc8e1.js"><link rel="prefetch" href="/assets/js/14.66f03368.js"><link rel="prefetch" href="/assets/js/15.9b79fcf8.js"><link rel="prefetch" href="/assets/js/16.d0247e44.js"><link rel="prefetch" href="/assets/js/18.21e21b26.js"><link rel="prefetch" href="/assets/js/19.db9fd121.js"><link rel="prefetch" href="/assets/js/20.32786d90.js"><link rel="prefetch" href="/assets/js/21.d0b7ab04.js"><link rel="prefetch" href="/assets/js/22.09987a33.js"><link rel="prefetch" href="/assets/js/23.0dfba8e2.js"><link rel="prefetch" href="/assets/js/24.2c1702f2.js"><link rel="prefetch" href="/assets/js/25.c8da04f8.js"><link rel="prefetch" href="/assets/js/26.95039233.js"><link rel="prefetch" href="/assets/js/27.63044a3c.js"><link rel="prefetch" href="/assets/js/28.fb4b27f4.js"><link rel="prefetch" href="/assets/js/29.dda4d2e4.js"><link rel="prefetch" href="/assets/js/30.a68931d2.js"><link rel="prefetch" href="/assets/js/31.0e60c788.js"><link rel="prefetch" href="/assets/js/32.24e7bf42.js"><link rel="prefetch" href="/assets/js/33.ff623dc3.js"><link rel="prefetch" href="/assets/js/34.9999b40d.js"><link rel="prefetch" href="/assets/js/35.b3bea3e2.js"><link rel="prefetch" href="/assets/js/36.a2448b48.js"><link rel="prefetch" href="/assets/js/37.479b9805.js"><link rel="prefetch" href="/assets/js/38.2ff28a79.js"><link rel="prefetch" href="/assets/js/39.7606baf8.js"><link rel="prefetch" href="/assets/js/40.961e8148.js"><link rel="prefetch" href="/assets/js/41.802ec3ef.js"><link rel="prefetch" href="/assets/js/42.9a8374d3.js"><link rel="prefetch" href="/assets/js/43.0cc1ff10.js"><link rel="prefetch" href="/assets/js/44.69cfba2c.js"><link rel="prefetch" href="/assets/js/45.e2cddb65.js"><link rel="prefetch" href="/assets/js/46.8d614f4d.js"><link rel="prefetch" href="/assets/js/47.4d1470b5.js"><link rel="prefetch" href="/assets/js/48.f241ba7b.js"><link rel="prefetch" href="/assets/js/49.dca59c7f.js"><link rel="prefetch" href="/assets/js/5.08af2918.js"><link rel="prefetch" href="/assets/js/50.b1b1f377.js"><link rel="prefetch" href="/assets/js/51.9781c931.js"><link rel="prefetch" href="/assets/js/52.9d183f27.js"><link rel="prefetch" href="/assets/js/53.1da60d18.js"><link rel="prefetch" href="/assets/js/54.4ec08b48.js"><link rel="prefetch" href="/assets/js/55.ae1bd709.js"><link rel="prefetch" href="/assets/js/56.d56cf96d.js"><link rel="prefetch" href="/assets/js/57.227fa458.js"><link rel="prefetch" href="/assets/js/58.4b2e9a52.js"><link rel="prefetch" href="/assets/js/59.15174590.js"><link rel="prefetch" href="/assets/js/6.ecaa07ef.js"><link rel="prefetch" href="/assets/js/60.e59cffa4.js"><link rel="prefetch" href="/assets/js/61.4c9c543f.js"><link rel="prefetch" href="/assets/js/62.3c6dc73b.js"><link rel="prefetch" href="/assets/js/63.b2721aec.js"><link rel="prefetch" href="/assets/js/64.627526fa.js"><link rel="prefetch" href="/assets/js/65.2a7dacaa.js"><link rel="prefetch" href="/assets/js/66.61723638.js"><link rel="prefetch" href="/assets/js/67.7ef8d496.js"><link rel="prefetch" href="/assets/js/68.c173cda5.js"><link rel="prefetch" href="/assets/js/69.07208188.js"><link rel="prefetch" href="/assets/js/7.32d7af68.js"><link rel="prefetch" href="/assets/js/70.8e71d197.js"><link rel="prefetch" href="/assets/js/71.20a0ca92.js"><link rel="prefetch" href="/assets/js/72.02779864.js"><link rel="prefetch" href="/assets/js/73.62794670.js"><link rel="prefetch" href="/assets/js/74.eb62eaef.js"><link rel="prefetch" href="/assets/js/75.30c5ca65.js"><link rel="prefetch" href="/assets/js/76.a626f706.js"><link rel="prefetch" href="/assets/js/77.8a6eb6c9.js"><link rel="prefetch" href="/assets/js/78.8b2539b5.js"><link rel="prefetch" href="/assets/js/79.e02e046c.js"><link rel="prefetch" href="/assets/js/8.cc3eb95e.js"><link rel="prefetch" href="/assets/js/80.ceb49552.js"><link rel="prefetch" href="/assets/js/81.a94ad95d.js"><link rel="prefetch" href="/assets/js/82.7d1621c5.js"><link rel="prefetch" href="/assets/js/83.84defe94.js"><link rel="prefetch" href="/assets/js/84.8b291628.js"><link rel="prefetch" href="/assets/js/85.6c8c6001.js"><link rel="prefetch" href="/assets/js/86.c03271e6.js"><link rel="prefetch" href="/assets/js/87.4b7332bf.js"><link rel="prefetch" href="/assets/js/88.cee8b2c2.js"><link rel="prefetch" href="/assets/js/89.4d6cd2d9.js"><link rel="prefetch" href="/assets/js/9.276a0983.js"><link rel="prefetch" href="/assets/js/90.30d78272.js"><link rel="prefetch" href="/assets/js/91.861272f2.js"><link rel="prefetch" href="/assets/js/92.f9c64dbb.js"><link rel="prefetch" href="/assets/js/93.d8f807b3.js"><link rel="prefetch" href="/assets/js/94.2fad7e9e.js"><link rel="prefetch" href="/assets/js/95.8b7779be.js"><link rel="prefetch" href="/assets/js/96.fe19a942.js"><link rel="prefetch" href="/assets/js/97.cfc19557.js"><link rel="prefetch" href="/assets/js/98.2b59b5fa.js"><link rel="prefetch" href="/assets/js/99.b7501897.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.9577011c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9081f2d2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="theme-container"><div><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/head.jpg" alt="黄同学" class="logo"> <span class="site-name">黄同学</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><!----> <div class="dark-theme-options toggle-option"><label for="dark-theme-toggle">Enable Dark Theme?</label> <input id="dark-theme-toggle" type="checkbox" checked="checked"></div></div></div></div> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      前端技术
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/git/" class="nav-link"><i class="iconfont undefined"></i>
  Git
</a></li><li class="dropdown-item"><!----> <a href="/blog/linux/" class="nav-link"><i class="iconfont undefined"></i>
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/blog/html-css/" class="nav-link"><i class="iconfont undefined"></i>
  html-css
</a></li><li class="dropdown-item"><!----> <a href="/blog/javaScript/" class="nav-link"><i class="iconfont undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/blog/jQuery/" class="nav-link"><i class="iconfont undefined"></i>
  jQuery
</a></li><li class="dropdown-item"><!----> <a href="/blog/vue/" class="nav-link"><i class="iconfont undefined"></i>
  Vue.js
</a></li><li class="dropdown-item"><!----> <a href="/blog/react/" class="nav-link router-link-active"><i class="iconfont undefined"></i>
  React.js
</a></li><li class="dropdown-item"><!----> <a href="/blog/node/" class="nav-link"><i class="iconfont undefined"></i>
  Node.js
</a></li><li class="dropdown-item"><!----> <a href="/blog/others/" class="nav-link"><i class="iconfont undefined"></i>
  other
</a></li><li class="dropdown-item"><!----> <a href="/blog/work/" class="nav-link"><i class="iconfont undefined"></i>
  work
</a></li></ul></div></div><div class="nav-item"><a href="/archives/" class="nav-link"><i class="iconfont undefined"></i>
  Archives
</a></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/tags/" class="nav-link"><i class="iconfont undefined"></i>
  Tags
</a></div><div class="nav-item"><a href="/about/" class="nav-link"><i class="iconfont undefined"></i>
  Resume
</a></div><div class="nav-item"><a href="/friends/" class="nav-link"><i class="iconfont undefined"></i>
  Friends
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      前端技术
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/git/" class="nav-link"><i class="iconfont undefined"></i>
  Git
</a></li><li class="dropdown-item"><!----> <a href="/blog/linux/" class="nav-link"><i class="iconfont undefined"></i>
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/blog/html-css/" class="nav-link"><i class="iconfont undefined"></i>
  html-css
</a></li><li class="dropdown-item"><!----> <a href="/blog/javaScript/" class="nav-link"><i class="iconfont undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/blog/jQuery/" class="nav-link"><i class="iconfont undefined"></i>
  jQuery
</a></li><li class="dropdown-item"><!----> <a href="/blog/vue/" class="nav-link"><i class="iconfont undefined"></i>
  Vue.js
</a></li><li class="dropdown-item"><!----> <a href="/blog/react/" class="nav-link router-link-active"><i class="iconfont undefined"></i>
  React.js
</a></li><li class="dropdown-item"><!----> <a href="/blog/node/" class="nav-link"><i class="iconfont undefined"></i>
  Node.js
</a></li><li class="dropdown-item"><!----> <a href="/blog/others/" class="nav-link"><i class="iconfont undefined"></i>
  other
</a></li><li class="dropdown-item"><!----> <a href="/blog/work/" class="nav-link"><i class="iconfont undefined"></i>
  work
</a></li></ul></div></div><div class="nav-item"><a href="/archives/" class="nav-link"><i class="iconfont undefined"></i>
  Archives
</a></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/tags/" class="nav-link"><i class="iconfont undefined"></i>
  Tags
</a></div><div class="nav-item"><a href="/about/" class="nav-link"><i class="iconfont undefined"></i>
  Resume
</a></div><div class="nav-item"><a href="/friends/" class="nav-link"><i class="iconfont undefined"></i>
  Friends
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>react基础</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/react/base/01-React开发环境的搭建.html" class="sidebar-link">React 开发环境的搭建</a></li><li><a href="/blog/react/base/02-使用React写一个简单的TodoList.html" class="sidebar-link">使用React写一个TodoList</a></li><li><a href="/blog/react/base/03-React渲染原理和生命周期.html" class="sidebar-link">React入门-02</a></li><li><a href="/blog/react/base/04-React与Ajax和CSSTrainsition的使用.html" class="active sidebar-link">React与ajax和CSSTransition的使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/react/base/04-React与Ajax和CSSTrainsition的使用.html#在-react-发送-ajax-请求" class="sidebar-link">在 React 发送 Ajax 请求</a></li><li class="sidebar-sub-header"><a href="/blog/react/base/04-React与Ajax和CSSTrainsition的使用.html#使用-charles-实现本地数据-mock" class="sidebar-link">使用 Charles 实现本地数据 mock</a></li><li class="sidebar-sub-header"><a href="/blog/react/base/04-React与Ajax和CSSTrainsition的使用.html#react-实现-css-过渡动画" class="sidebar-link">React 实现 CSS 过渡动画</a></li><li class="sidebar-sub-header"><a href="/blog/react/base/04-React与Ajax和CSSTrainsition的使用.html#react-中使用-css-的动画效果" class="sidebar-link">React 中使用 CSS 的动画效果</a></li><li class="sidebar-sub-header"><a href="/blog/react/base/04-React与Ajax和CSSTrainsition的使用.html#react-transition-group-的使用" class="sidebar-link">React-transition-group 的使用</a></li></ul></li><li><a href="/blog/react/base/05-Redux入门.html" class="sidebar-link">Redux学习</a></li><li><a href="/blog/react/base/06-React中间件.html" class="sidebar-link">React中间件</a></li><li><a href="/blog/react/base/07-react-router学习.html" class="sidebar-link">React-router</a></li><li><a href="/blog/react/base/09-React-Hooks.html" class="sidebar-link">React-Hooks</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>react进阶</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page reco-hide"> <div class="page-title"><h1>React与ajax和CSSTransition的使用</h1> <hr> <div data-v-362e684e><i class="iconfont reco-account" data-v-362e684e><span data-v-362e684e>jsmond1016</span></i> <i class="iconfont reco-date" data-v-362e684e><span data-v-362e684e>7/8/2019</span></i> <span id="/blog/react/base/04-React%E4%B8%8EAjax%E5%92%8CCSSTrainsition%E7%9A%84%E4%BD%BF%E7%94%A8.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-2e99e05a data-v-362e684e><i class="iconfont reco-eye" style="margin-right: .5rem" data-v-2e99e05a></i> <a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;" data-v-2e99e05a></a></span> <i class="iconfont reco-tag tags" data-v-362e684e><span class="tag-item" data-v-362e684e>
      react
    </span><span class="tag-item" data-v-362e684e>
      ajax
    </span><span class="tag-item" data-v-362e684e>
      CSSTransition
    </span></i></div></div> <div class="content__default"><h2 id="在-react-发送-ajax-请求"><a href="#在-react-发送-ajax-请求" class="header-anchor">#</a> 在 React 发送 Ajax 请求</h2> <p>错误思想：我们可能会想，数据请求在 render 渲染的时候加载合适，所以 Ajax 请求放在 render 函数中</p> <p>错误代码：</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 	    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
 	    <span class="token keyword">this</span><span class="token punctuation">.</span>ajax<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
 	    	result <span class="token operator">=</span> res
 	    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span>content<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>content<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token punctuation">{</span>result<span class="token punctuation">}</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>我们来分析 【为什么不能这么写？】</p> <p>因为 render 函数会被反复执行，导致 Ajax 会重复请求。</p> <p>而通常而言，Ajax 只需要获取一次就行了！</p> <p>这个时候，我们会想到 【只会被执行一次的生命周期函数】</p> <p>—— <code>componentDidMount</code>  和 <code>componentWillMount</code> 或者是 放在构造函数 <code>constructor</code> 中</p> <p>但是，如果使用 <code>componentWillMount</code> ，考虑到后面项目开发逐渐复杂，比如写 <code>react native</code> 或者服务器端的同构时，会和一些更高端的技术产生冲突</p> <p>同时，也不建议获取 Ajax 请求写在 <code>constructor</code> 中</p> <p>推荐写法：写在 <code>componentDidMount</code> 中，不会有任何问题！</p> <p>比如，我们使用 <code>axios</code> 进行测试：</p> <ul><li><code>yarn add axios</code></li> <li><a href="https://stackoverflow.com/questions/46013544/yarn-install-command-error-no-such-file-or-directory-install/48010859" target="_blank" rel="noopener noreferrer">yarn 安装失败：No sucn file: add<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>然后，看详细代码：</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> Fragment<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> TodoItem <span class="token keyword">from</span> <span class="token string">'./TodoItem'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./style.css'</span>

<span class="token keyword">class</span> <span class="token class-name">TodoList</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token punctuation">{</span>

    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
            inputValue<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
            list<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'学习英文'</span><span class="token punctuation">,</span> <span class="token string">'学习 React'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
       <span class="token punctuation">{</span><span class="token comment">//略...}</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
           <span class="token punctuation">{</span><span class="token comment">//省略部分代码...}</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
            
    <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/api/todolist'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'succ'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> TodoList<span class="token punctuation">;</span>
</code></pre></div><p>效果如下：</p> <p><img src="/assets/img/1561344340727.fb5ba0c8.png" alt="1561344340727"></p> <h2 id="使用-charles-实现本地数据-mock"><a href="#使用-charles-实现本地数据-mock" class="header-anchor">#</a> 使用 Charles 实现本地数据 mock</h2> <ul><li><a href="https://www.axihe.com/charles/charles/download.html#windows-64" target="_blank" rel="noopener noreferrer">Charles 下载安装<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.axihe.com/charles/charles/free-use.html#charles-%E7%A0%B4%E8%A7%A3%E5%8E%9F%E7%90%86%E4%BA%8C-%E6%B3%A8%E5%86%8C%E7%A0%81%E8%BF%9B%E8%A1%8C%E6%B3%A8%E5%86%8C" target="_blank" rel="noopener noreferrer">Charles 注册码<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>首先，新建 <code>Todolist.json</code> 文件，在里面写点东西：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span><span class="token string">&quot;Dell&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Lee&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Hello&quot;</span><span class="token punctuation">]</span>
</code></pre></div><p>然后，打开 Tools &gt;&gt; Map Local &gt;&gt; Add ，根据刚才 axios 中使用的路径来配置：</p> <p><img src="/assets/img/1561389163769.cafc1901.png" alt="1561389163769"></p> <p>相关代码：</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> Fragment<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> TodoItem <span class="token keyword">from</span> <span class="token string">'./TodoItem'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span><span class="token punctuation">;</span>

<span class="token punctuation">{</span><span class="token comment">// 省略部分代码}</span>

<span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/api/todolist'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
               list<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">...</span>res<span class="token punctuation">.</span>data<span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token punctuation">{</span><span class="token comment">// 省略部分代码}</span>
</code></pre></div><h2 id="react-实现-css-过渡动画"><a href="#react-实现-css-过渡动画" class="header-anchor">#</a> React 实现 CSS 过渡动画</h2> <p>看代码：</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> Fragment <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./style.css'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
            show<span class="token punctuation">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>handleToggle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleToggle</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Fragment</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>show <span class="token operator">?</span> <span class="token string">'show'</span> <span class="token punctuation">:</span> <span class="token string">'hide'</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">hello</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleToggle<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">toggle</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Fragment</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">handleToggle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            show<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>show <span class="token operator">?</span> <span class="token boolean">false</span> <span class="token punctuation">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
</code></pre></div><p>对应的 css 如下：</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.show</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
    <span class="token property">transition</span><span class="token punctuation">:</span> all 1s ease-in<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.hide</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">transition</span><span class="token punctuation">:</span> all 1s ease-in<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="react-中使用-css-的动画效果"><a href="#react-中使用-css-的动画效果" class="header-anchor">#</a> React 中使用 CSS 的动画效果</h2> <p>js 代码还是和上面一样，修改 css 代码即可</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.show</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
    <span class="token property">transition</span><span class="token punctuation">:</span> all 1s ease-in<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.hide</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">animation</span><span class="token punctuation">:</span>hide-item 2s ease-in<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token atrule"><span class="token rule">@keyframes</span> hide-item</span> <span class="token punctuation">{</span>
	<span class="token selector">0%</span><span class="token punctuation">{</span>
 		<span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
 		<span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
	 <span class="token punctuation">}</span>
	 <span class="token selector">50%</span><span class="token punctuation">{</span>
	 	<span class="token property">opacity</span><span class="token punctuation">:</span> 0.5<span class="token punctuation">;</span>
	 	<span class="token property">color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span>
	 <span class="token punctuation">}</span>
	 <span class="token selector">100%</span><span class="token punctuation">{</span>
         <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
         <span class="token property">color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>
	 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这样就实现了动画效果啦</p> <p>但是还有一个问题，动画效果结束后它又显示了！？</p> <p>我们想要的是让 item 隐藏，<strong>即保留该动画最后一帧的样式</strong>，难道需要单独写一个 css 样式吗？</p> <p>不需要，直接使用 <code>forwards</code> 即可实现，代码如下：</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.hide</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">animation</span><span class="token punctuation">:</span>hide-item 2s ease-in forwards<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="react-transition-group-的使用"><a href="#react-transition-group-的使用" class="header-anchor">#</a> React-transition-group 的使用</h2> <blockquote><p><a href="https://reactcommunity.org/react-transition-group/" target="_blank" rel="noopener noreferrer">React-transition-group安装<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <h3 id="csstransition-的使用"><a href="#csstransition-的使用" class="header-anchor">#</a> CSSTransition 的使用</h3> <ul><li><a href="https://reactcommunity.org/react-transition-group/css-transition" target="_blank" rel="noopener noreferrer">CSSTransition学习教程<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>代码如下：</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> Fragment <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> CSSTransition <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-transition-group'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./style.css'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
            show<span class="token punctuation">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>handleToggle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleToggle</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Fragment</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">CSSTransition</span></span>
                    <span class="token attr-name">in</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>show<span class="token punctuation">}</span></span>
                    <span class="token attr-name">timeout</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">1000</span><span class="token punctuation">}</span></span>
                    <span class="token attr-name">classNames</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>fades<span class="token punctuation">'</span></span>
                    <span class="token attr-name">unmountOnExit</span>
                    <span class="token attr-name">onEnter</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color<span class="token operator">=</span><span class="token string">'blue'</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
                <span class="token punctuation">&gt;</span></span><span class="token plain-text">
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>show <span class="token operator">?</span> <span class="token string">'show'</span> <span class="token punctuation">:</span> <span class="token string">'hide'</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">hello</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">CSSTransition</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleToggle<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">toggle</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Fragment</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">handleToggle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            show<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>show <span class="token operator">?</span> <span class="token boolean">false</span> <span class="token punctuation">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
</code></pre></div><p>CSS 代码为：</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.fade-enter, .fade-appear</span><span class="token punctuation">{</span> //动画进入前效果
    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.fade-enter-active, .fade-appear-active</span><span class="token punctuation">{</span> //动画进入时效果
    <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
    <span class="token property">transition</span><span class="token punctuation">:</span> opacity 1s ease-in<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.fade-enter-done</span><span class="token punctuation">{</span> //动画进入后效果
    <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.fade-exit</span><span class="token punctuation">{</span> //动画退出前效果
    <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.fade-exit-active</span> <span class="token punctuation">{</span> //动画退出时效果
    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">transition</span><span class="token punctuation">:</span> opacity 1s ease-in<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.fade-exit-done</span> <span class="token punctuation">{</span>  //动画退出后效果
    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>其中，需要着重说明：</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">CSSTransition</span></span>
     <span class="token attr-name">in</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>show<span class="token punctuation">}</span></span>
     <span class="token attr-name">timeout</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">1000</span><span class="token punctuation">}</span></span>
     <span class="token attr-name">classNames</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>fades<span class="token punctuation">'</span></span>
     <span class="token attr-name">unmountOnExit</span>
     <span class="token attr-name">onEnter</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color<span class="token operator">=</span><span class="token string">'blue'</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
     <span class="token attr-name">appear</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span></span>
     <span class="token punctuation">&gt;</span></span><span class="token plain-text">
	 </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>show <span class="token operator">?</span> <span class="token string">'show'</span> <span class="token punctuation">:</span> <span class="token string">'hide'</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">hello</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
 </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">CSSTransition</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><code>unmountOnExit</code> 表示在 toggle 以后，显示后逐渐隐藏的 div 在完成过渡效果后<strong>消失</strong></li> <li><code>onEnter</code> 钩子。即在有需要时或者说仅仅使用 css 过渡实现不了过渡效果时，辅助 js 的方式添加过渡效果，上述代码中使用 js 的方式给过渡元素添加颜色为蓝色。当然， CSS Transition还提供了其他钩子，如 <code>onEntering</code> ，<code>onEntered</code> ， <code>onExit</code> 等，我们需要特别注意这些<strong>钩子的执行时间</strong>。</li> <li><code>className=&quot;fade&quot;</code> 当 class 名字设置成什么，对应的 CSS 样式就是 <code>.fade-enter</code> 或 <code>.fade-exit</code> 等，名字需要一一对应！</li> <li><code>appear={true}</code> 属性，即当你想要<strong>页面一开始加载的时候就有该动画效果</strong>，设置该属性为 true ，同时在 CSS 代码中添加 <code>.fade-appear</code> 等即可实现。</li></ul> <p>**需要注意：**当使用 <code>CSSTransition</code> 满足不了我们的动画需求时，我们可以看看 <a href="http://reactcommunity.org/react-transition-group/transition" target="_blank" rel="noopener noreferrer">transition<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ，这里可以找到对应的方法</p> <h3 id="transitiongroup-的使用"><a href="#transitiongroup-的使用" class="header-anchor">#</a> TransitionGroup 的使用</h3> <ul><li><a href="http://reactcommunity.org/react-transition-group/transition-group" target="_blank" rel="noopener noreferrer">transition-group 教程<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>应用场景：当多个 DOM 需要做同样的动画时使用。</p> <p>需求：点击按钮新增同样的 item ，同时，每一个新增的 item 都有同样的动画效果。</p> <p>JS 代码如下：</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> Fragment <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> CSSTransition <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-transition-group'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./style.css'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
            list<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>addItem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addItem</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Fragment</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token punctuation">{</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>addItem<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">toggle</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Fragment</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">addItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prevState</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
                list<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">...</span>prevState<span class="token punctuation">.</span>list<span class="token punctuation">,</span> <span class="token string">'item'</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>效果如下：</p> <p><img src="data:image/png;base64,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AOcIHAAAwDkCBwAAcI7AAQAAnCNwAAAA5wgcAADAOQIHAABwjsABAACcI3AAAADnCBwAAMA5AgcAAHCOwAEAAJwjcAAAAOcIHAAAwDkCBwAAcI7AAQAAnCNwAAAA5wgcAADAOQIHAABwjsABAACcI3AAAADnCBwAAMA5AgcAAHCOwAEAAJwjcAAAAOcIHAAAwDkCBwAAcI7AAQAAnCNwAAAA5wgcAADAOQIHAABwjsABAACcI3AAAADnCBwAAMA5AgcAAHCOwAEAAJwjcAAAAOcIHAAAwDkCBwAAcI7AAQAAnCNwAAAA5wgcAADAOQIHAABwjsABAACcI3AAAADnCBwAAMA5AgcAAHCOwAEAAJwjcAAAAOcIHAAAwDkCBwAAcI7AAQAAnCNwAAAA5wgcAADAOQIHAABwjsABAACcI3AAAADnCBwAAMA5AgcAAHCOwAEAAJwjcAAAAOcIHAAAwDkCBwAAcI7AAQAAnCNwAAAA5wgcAADAOQIHAABwjsABAACcI3AAAADnCBwAAMA5AgcAAHCOwAEAAJwjcAAAAOcIHAAAwDkCBwAAcI7AAQAAnCNwAAAA5wgcAADAOQIHAABwjsABAACcI3AAAADnCBwAAMA5AgcAAHCOwAEAAJwjcAAAAOcIHAAAwDkCBwAAcI7AAQAAnCNwAAAA5wgcAADAOQIHAABwjsABAACcI3AAAADnCBwAAMA5AgcAAHCOwAEAAJwjcAAAAOcIHAAAwLn/D2QXQbdKUYFxAAAAAElFTkSuQmCC" alt="1561427420231"></p> <p>需求：每次点击按钮新增 item 都会有同样的动画效果</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> Fragment <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> CSSTransition<span class="token punctuation">,</span> TransitionGroup <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-transition-group'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./style.css'</span><span class="token punctuation">;</span>



<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
            list<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>addItem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addItem</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Fragment</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">TransitionGroup</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                        </span><span class="token punctuation">{</span>
                            <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                                <span class="token keyword">return</span> <span class="token punctuation">(</span>
                                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">CSSTransition</span></span>
                                        <span class="token attr-name">timeout</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">1000</span><span class="token punctuation">}</span></span>
                                        <span class="token attr-name">classNames</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>fade<span class="token punctuation">&quot;</span></span>
                                        <span class="token attr-name">unmountOnExit</span>
                                        <span class="token attr-name">onEntered</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color<span class="token operator">=</span><span class="token string">'blue'</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
                                        <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span></span>
                                        <span class="token attr-name">appear</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span></span>
                                    <span class="token punctuation">&gt;</span></span><span class="token plain-text">
                                        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">CSSTransition</span></span><span class="token punctuation">&gt;</span></span>
                                <span class="token punctuation">)</span>
                            <span class="token punctuation">}</span><span class="token punctuation">)</span>
                        <span class="token punctuation">}</span><span class="token plain-text">
                        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>addItem<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">toggle</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">TransitionGroup</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Fragment</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">addItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prevState</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
                list<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">...</span>prevState<span class="token punctuation">.</span>list<span class="token punctuation">,</span> <span class="token string">'item'</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
</code></pre></div><p>对于原来 <code>CSSTransition</code> 里面的属性，只需要将 <code>in={this.state.show}</code> 删除即可，其他不需要改变</p> <p>将需要做动画效果的单个组件包裹在 <code>CSSTransition</code> 里面，然后在其外侧包裹 <code>TransitionGroup</code> 就可以实现啦。</p> <p><strong>注意：对于 <code>key={index}</code> 需要放在第一个外层元素上</strong> ，而不是原来的 <code>&lt;div key={index}&gt;{item}&lt;/div&gt;</code> 上</p> <h3 id="小结："><a href="#小结：" class="header-anchor">#</a> 小结：</h3> <p>在日常开发中，通常需要将 <code>CSSTransition</code> 和 <code>TransitionGroup</code> 结合使用，当我们发现使用 <code>TransitionGroup</code> 无法满足需求时，我们可以看看 <code>CSSTransition</code> 的API，通常可以找到我们想要的答案。</p></div> <!----> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">9/3/2019, 2:32:06 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/blog/react/base/03-React渲染原理和生命周期.html" class="prev">
          React入门-02
        </a></span> <span class="next"><a href="/blog/react/base/05-Redux入门.html">
          Redux学习
        </a>
        →
      </span></p></div> </main> <div class="valine-wrapper" data-v-5029e45b><div id="valine" data-v-5029e45b></div></div></div> <div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;background-color:rgba(231, 234, 241,.5);display:none;" data-v-cd623d78 data-v-cd623d78><i class="iconfont reco-up" data-v-cd623d78></i></div></div></div></div><div class="global-ui"><SWUpdatePopup></SWUpdatePopup></div></div>
    <script src="/assets/js/app.030edb0b.js" defer></script><script src="/assets/js/4.7584c211.js" defer></script><script src="/assets/js/1.868075c3.js" defer></script><script src="/assets/js/17.6ba9c659.js" defer></script>
  </body>
</html>
