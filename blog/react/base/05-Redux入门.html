<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Redux学习 | 黄同学</title>
    <meta name="description" content="A simple and beautiful vuepress blog theme .">
    <link rel="icon" href="/favicon.ico">
  <link rel="manifest" href="/manifest.json">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.9081f2d2.css" as="style"><link rel="preload" href="/assets/js/app.030edb0b.js" as="script"><link rel="preload" href="/assets/js/4.7584c211.js" as="script"><link rel="preload" href="/assets/js/1.868075c3.js" as="script"><link rel="preload" href="/assets/js/13.154fc8e1.js" as="script"><link rel="prefetch" href="/assets/js/10.b5ddafc3.js"><link rel="prefetch" href="/assets/js/100.552dabd5.js"><link rel="prefetch" href="/assets/js/101.a4cc5194.js"><link rel="prefetch" href="/assets/js/102.d7063e06.js"><link rel="prefetch" href="/assets/js/103.af983978.js"><link rel="prefetch" href="/assets/js/104.1a951dc1.js"><link rel="prefetch" href="/assets/js/105.6388597e.js"><link rel="prefetch" href="/assets/js/106.186d538d.js"><link rel="prefetch" href="/assets/js/107.0e5b1212.js"><link rel="prefetch" href="/assets/js/108.c1ef63b3.js"><link rel="prefetch" href="/assets/js/109.aecd9cea.js"><link rel="prefetch" href="/assets/js/11.a63f45e4.js"><link rel="prefetch" href="/assets/js/110.2728a88d.js"><link rel="prefetch" href="/assets/js/111.defea116.js"><link rel="prefetch" href="/assets/js/112.674116bd.js"><link rel="prefetch" href="/assets/js/113.4328a4fb.js"><link rel="prefetch" href="/assets/js/114.cd42a499.js"><link rel="prefetch" href="/assets/js/115.9c77f35b.js"><link rel="prefetch" href="/assets/js/116.2e0b8223.js"><link rel="prefetch" href="/assets/js/117.3ab96d58.js"><link rel="prefetch" href="/assets/js/118.9d37f28a.js"><link rel="prefetch" href="/assets/js/119.d8736b01.js"><link rel="prefetch" href="/assets/js/12.5d60dde7.js"><link rel="prefetch" href="/assets/js/120.91c48559.js"><link rel="prefetch" href="/assets/js/121.07c47c03.js"><link rel="prefetch" href="/assets/js/122.438d8bfe.js"><link rel="prefetch" href="/assets/js/14.66f03368.js"><link rel="prefetch" href="/assets/js/15.9b79fcf8.js"><link rel="prefetch" href="/assets/js/16.d0247e44.js"><link rel="prefetch" href="/assets/js/17.6ba9c659.js"><link rel="prefetch" href="/assets/js/18.21e21b26.js"><link rel="prefetch" href="/assets/js/19.db9fd121.js"><link rel="prefetch" href="/assets/js/20.32786d90.js"><link rel="prefetch" href="/assets/js/21.d0b7ab04.js"><link rel="prefetch" href="/assets/js/22.09987a33.js"><link rel="prefetch" href="/assets/js/23.0dfba8e2.js"><link rel="prefetch" href="/assets/js/24.2c1702f2.js"><link rel="prefetch" href="/assets/js/25.c8da04f8.js"><link rel="prefetch" href="/assets/js/26.95039233.js"><link rel="prefetch" href="/assets/js/27.63044a3c.js"><link rel="prefetch" href="/assets/js/28.fb4b27f4.js"><link rel="prefetch" href="/assets/js/29.dda4d2e4.js"><link rel="prefetch" href="/assets/js/30.a68931d2.js"><link rel="prefetch" href="/assets/js/31.0e60c788.js"><link rel="prefetch" href="/assets/js/32.24e7bf42.js"><link rel="prefetch" href="/assets/js/33.ff623dc3.js"><link rel="prefetch" href="/assets/js/34.9999b40d.js"><link rel="prefetch" href="/assets/js/35.b3bea3e2.js"><link rel="prefetch" href="/assets/js/36.a2448b48.js"><link rel="prefetch" href="/assets/js/37.479b9805.js"><link rel="prefetch" href="/assets/js/38.2ff28a79.js"><link rel="prefetch" href="/assets/js/39.7606baf8.js"><link rel="prefetch" href="/assets/js/40.961e8148.js"><link rel="prefetch" href="/assets/js/41.802ec3ef.js"><link rel="prefetch" href="/assets/js/42.9a8374d3.js"><link rel="prefetch" href="/assets/js/43.0cc1ff10.js"><link rel="prefetch" href="/assets/js/44.69cfba2c.js"><link rel="prefetch" href="/assets/js/45.e2cddb65.js"><link rel="prefetch" href="/assets/js/46.8d614f4d.js"><link rel="prefetch" href="/assets/js/47.4d1470b5.js"><link rel="prefetch" href="/assets/js/48.f241ba7b.js"><link rel="prefetch" href="/assets/js/49.dca59c7f.js"><link rel="prefetch" href="/assets/js/5.08af2918.js"><link rel="prefetch" href="/assets/js/50.b1b1f377.js"><link rel="prefetch" href="/assets/js/51.9781c931.js"><link rel="prefetch" href="/assets/js/52.9d183f27.js"><link rel="prefetch" href="/assets/js/53.1da60d18.js"><link rel="prefetch" href="/assets/js/54.4ec08b48.js"><link rel="prefetch" href="/assets/js/55.ae1bd709.js"><link rel="prefetch" href="/assets/js/56.d56cf96d.js"><link rel="prefetch" href="/assets/js/57.227fa458.js"><link rel="prefetch" href="/assets/js/58.4b2e9a52.js"><link rel="prefetch" href="/assets/js/59.15174590.js"><link rel="prefetch" href="/assets/js/6.ecaa07ef.js"><link rel="prefetch" href="/assets/js/60.e59cffa4.js"><link rel="prefetch" href="/assets/js/61.4c9c543f.js"><link rel="prefetch" href="/assets/js/62.3c6dc73b.js"><link rel="prefetch" href="/assets/js/63.b2721aec.js"><link rel="prefetch" href="/assets/js/64.627526fa.js"><link rel="prefetch" href="/assets/js/65.2a7dacaa.js"><link rel="prefetch" href="/assets/js/66.61723638.js"><link rel="prefetch" href="/assets/js/67.7ef8d496.js"><link rel="prefetch" href="/assets/js/68.c173cda5.js"><link rel="prefetch" href="/assets/js/69.07208188.js"><link rel="prefetch" href="/assets/js/7.32d7af68.js"><link rel="prefetch" href="/assets/js/70.8e71d197.js"><link rel="prefetch" href="/assets/js/71.20a0ca92.js"><link rel="prefetch" href="/assets/js/72.02779864.js"><link rel="prefetch" href="/assets/js/73.62794670.js"><link rel="prefetch" href="/assets/js/74.eb62eaef.js"><link rel="prefetch" href="/assets/js/75.30c5ca65.js"><link rel="prefetch" href="/assets/js/76.a626f706.js"><link rel="prefetch" href="/assets/js/77.8a6eb6c9.js"><link rel="prefetch" href="/assets/js/78.8b2539b5.js"><link rel="prefetch" href="/assets/js/79.e02e046c.js"><link rel="prefetch" href="/assets/js/8.cc3eb95e.js"><link rel="prefetch" href="/assets/js/80.ceb49552.js"><link rel="prefetch" href="/assets/js/81.a94ad95d.js"><link rel="prefetch" href="/assets/js/82.7d1621c5.js"><link rel="prefetch" href="/assets/js/83.84defe94.js"><link rel="prefetch" href="/assets/js/84.8b291628.js"><link rel="prefetch" href="/assets/js/85.6c8c6001.js"><link rel="prefetch" href="/assets/js/86.c03271e6.js"><link rel="prefetch" href="/assets/js/87.4b7332bf.js"><link rel="prefetch" href="/assets/js/88.cee8b2c2.js"><link rel="prefetch" href="/assets/js/89.4d6cd2d9.js"><link rel="prefetch" href="/assets/js/9.276a0983.js"><link rel="prefetch" href="/assets/js/90.30d78272.js"><link rel="prefetch" href="/assets/js/91.861272f2.js"><link rel="prefetch" href="/assets/js/92.f9c64dbb.js"><link rel="prefetch" href="/assets/js/93.d8f807b3.js"><link rel="prefetch" href="/assets/js/94.2fad7e9e.js"><link rel="prefetch" href="/assets/js/95.8b7779be.js"><link rel="prefetch" href="/assets/js/96.fe19a942.js"><link rel="prefetch" href="/assets/js/97.cfc19557.js"><link rel="prefetch" href="/assets/js/98.2b59b5fa.js"><link rel="prefetch" href="/assets/js/99.b7501897.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.9577011c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9081f2d2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="theme-container"><div><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/head.jpg" alt="黄同学" class="logo"> <span class="site-name">黄同学</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><!----> <div class="dark-theme-options toggle-option"><label for="dark-theme-toggle">Enable Dark Theme?</label> <input id="dark-theme-toggle" type="checkbox" checked="checked"></div></div></div></div> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      前端技术
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/git/" class="nav-link"><i class="iconfont undefined"></i>
  Git
</a></li><li class="dropdown-item"><!----> <a href="/blog/linux/" class="nav-link"><i class="iconfont undefined"></i>
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/blog/html-css/" class="nav-link"><i class="iconfont undefined"></i>
  html-css
</a></li><li class="dropdown-item"><!----> <a href="/blog/javaScript/" class="nav-link"><i class="iconfont undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/blog/jQuery/" class="nav-link"><i class="iconfont undefined"></i>
  jQuery
</a></li><li class="dropdown-item"><!----> <a href="/blog/vue/" class="nav-link"><i class="iconfont undefined"></i>
  Vue.js
</a></li><li class="dropdown-item"><!----> <a href="/blog/react/" class="nav-link router-link-active"><i class="iconfont undefined"></i>
  React.js
</a></li><li class="dropdown-item"><!----> <a href="/blog/node/" class="nav-link"><i class="iconfont undefined"></i>
  Node.js
</a></li><li class="dropdown-item"><!----> <a href="/blog/others/" class="nav-link"><i class="iconfont undefined"></i>
  other
</a></li><li class="dropdown-item"><!----> <a href="/blog/work/" class="nav-link"><i class="iconfont undefined"></i>
  work
</a></li></ul></div></div><div class="nav-item"><a href="/archives/" class="nav-link"><i class="iconfont undefined"></i>
  Archives
</a></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/tags/" class="nav-link"><i class="iconfont undefined"></i>
  Tags
</a></div><div class="nav-item"><a href="/about/" class="nav-link"><i class="iconfont undefined"></i>
  Resume
</a></div><div class="nav-item"><a href="/friends/" class="nav-link"><i class="iconfont undefined"></i>
  Friends
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      前端技术
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/git/" class="nav-link"><i class="iconfont undefined"></i>
  Git
</a></li><li class="dropdown-item"><!----> <a href="/blog/linux/" class="nav-link"><i class="iconfont undefined"></i>
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/blog/html-css/" class="nav-link"><i class="iconfont undefined"></i>
  html-css
</a></li><li class="dropdown-item"><!----> <a href="/blog/javaScript/" class="nav-link"><i class="iconfont undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/blog/jQuery/" class="nav-link"><i class="iconfont undefined"></i>
  jQuery
</a></li><li class="dropdown-item"><!----> <a href="/blog/vue/" class="nav-link"><i class="iconfont undefined"></i>
  Vue.js
</a></li><li class="dropdown-item"><!----> <a href="/blog/react/" class="nav-link router-link-active"><i class="iconfont undefined"></i>
  React.js
</a></li><li class="dropdown-item"><!----> <a href="/blog/node/" class="nav-link"><i class="iconfont undefined"></i>
  Node.js
</a></li><li class="dropdown-item"><!----> <a href="/blog/others/" class="nav-link"><i class="iconfont undefined"></i>
  other
</a></li><li class="dropdown-item"><!----> <a href="/blog/work/" class="nav-link"><i class="iconfont undefined"></i>
  work
</a></li></ul></div></div><div class="nav-item"><a href="/archives/" class="nav-link"><i class="iconfont undefined"></i>
  Archives
</a></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/tags/" class="nav-link"><i class="iconfont undefined"></i>
  Tags
</a></div><div class="nav-item"><a href="/about/" class="nav-link"><i class="iconfont undefined"></i>
  Resume
</a></div><div class="nav-item"><a href="/friends/" class="nav-link"><i class="iconfont undefined"></i>
  Friends
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>react基础</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/react/base/01-React开发环境的搭建.html" class="sidebar-link">React 开发环境的搭建</a></li><li><a href="/blog/react/base/02-使用React写一个简单的TodoList.html" class="sidebar-link">使用React写一个TodoList</a></li><li><a href="/blog/react/base/03-React渲染原理和生命周期.html" class="sidebar-link">React入门-02</a></li><li><a href="/blog/react/base/04-React与Ajax和CSSTrainsition的使用.html" class="sidebar-link">React与ajax和CSSTransition的使用</a></li><li><a href="/blog/react/base/05-Redux入门.html" class="active sidebar-link">Redux学习</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/react/base/05-Redux入门.html#react-的不足" class="sidebar-link">React 的不足</a></li><li class="sidebar-sub-header"><a href="/blog/react/base/05-Redux入门.html#了解-redux" class="sidebar-link">了解 Redux</a></li><li class="sidebar-sub-header"><a href="/blog/react/base/05-Redux入门.html#使用-antd-实现-todolist-的布局" class="sidebar-link">使用 AnTd 实现 Todolist 的布局</a></li><li class="sidebar-sub-header"><a href="/blog/react/base/05-Redux入门.html#创建-redux-中的-store" class="sidebar-link">创建 Redux 中的 store</a></li><li class="sidebar-sub-header"><a href="/blog/react/base/05-Redux入门.html#action-和-reducer-的编写" class="sidebar-link">Action 和 Reducer 的编写</a></li><li class="sidebar-sub-header"><a href="/blog/react/base/05-Redux入门.html#使用-redux-完成-todolist-的删除功能" class="sidebar-link">使用 Redux 完成 TodoList 的删除功能</a></li><li class="sidebar-sub-header"><a href="/blog/react/base/05-Redux入门.html#actiontypes-的拆分" class="sidebar-link">ActionTypes 的拆分</a></li><li class="sidebar-sub-header"><a href="/blog/react/base/05-Redux入门.html#使用-actioncreator-统一创建-action" class="sidebar-link">使用 ActionCreator 统一创建 action</a></li><li class="sidebar-sub-header"><a href="/blog/react/base/05-Redux入门.html#redux-知识点梳理" class="sidebar-link">Redux 知识点梳理</a></li></ul></li><li><a href="/blog/react/base/06-React中间件.html" class="sidebar-link">React中间件</a></li><li><a href="/blog/react/base/07-react-router学习.html" class="sidebar-link">React-router</a></li><li><a href="/blog/react/base/09-React-Hooks.html" class="sidebar-link">React-Hooks</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>react进阶</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page reco-hide"> <div class="page-title"><h1>Redux学习</h1> <hr> <div data-v-362e684e><i class="iconfont reco-account" data-v-362e684e><span data-v-362e684e>jsmond1016</span></i> <i class="iconfont reco-date" data-v-362e684e><span data-v-362e684e>7/8/2019</span></i> <span id="/blog/react/base/05-Redux%E5%85%A5%E9%97%A8.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-2e99e05a data-v-362e684e><i class="iconfont reco-eye" style="margin-right: .5rem" data-v-2e99e05a></i> <a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;" data-v-2e99e05a></a></span> <i class="iconfont reco-tag tags" data-v-362e684e><span class="tag-item" data-v-362e684e>
      react
    </span><span class="tag-item" data-v-362e684e>
      redux
    </span></i></div></div> <div class="content__default"><h1 id="react-入门——redux-学习"><a href="#react-入门——redux-学习" class="header-anchor">#</a> React 入门——Redux  学习</h1> <h2 id="react-的不足"><a href="#react-的不足" class="header-anchor">#</a> React 的不足</h2> <p>前面我们学习过 React 的父子通信的知识，我们知道，当最顶层的父元素想要获得最底层子元素的数据时，需要子元素一级一级往上传，这样显得很麻烦很累赘，代码也会显得很恶心，这也更加加深了我们对 React 只是一个轻量型的 UI 框架。</p> <p>为了解决这种问题，我们引出今天的主角—— Redux</p> <p>Redux 是什么？</p> <p>我们可以简单的认为它是一个数据管理中心 Store，有了它，每一个组件都可以将数据进行变更，然后每个组件都从 Store 中取数据，这样就避免了原先子元素需要一级一级往上传递数据给父元素的不足。</p> <p><img src="/assets/img/1561431036287.602094b1.png" alt="1561431036287"></p> <p>Redux 的历史</p> <p><code>Redux = Reducer + Flux</code></p> <p>React 在 2013 年开源的时候，也开源了辅助 React 的工具 Flux，进行数据管理，因为 Flux 自身存在了一些不足，因此有人将其升级成了 Redux</p> <h2 id="了解-redux"><a href="#了解-redux" class="header-anchor">#</a> 了解 Redux</h2> <ul><li><a href="https://redux.js.org/" target="_blank" rel="noopener noreferrer">Redux 官网<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.redux.org.cn/" target="_blank" rel="noopener noreferrer">Redux 中文网<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p><img src="/assets/img/1561436095977.a5c6e068.png" alt="1561436095977"></p> <p>以上，是 Redux 的工作流程表，为了更好理解，我们做个比喻：</p> <ul><li>React Components：借书人</li> <li>Action Creators：借书人说的话（要借什么东西）</li> <li>Store：图书管理员</li> <li>Reducers：图书管理员的记录本（图书清单，名字以及分类和所在位置等）</li></ul> <p>具体流程为：</p> <p>借书人要借一本书，他找到图书管理员，图书管理员对照记录本，查看是否有这本书，查找其在哪一个位置等信息，找到这本书后，管理员将该书给到借书人。</p> <p>代码理解：</p> <ul><li>获取数据</li></ul> <p>首先，我们有一个组件，这个组件要获取 Store 中的数据（Action Creatures），它告诉 Store ，Store 并不知道组件需要的是什么类型的数据，它需要去问一下 Reducer，Reducer 知道该给组件什么数据。Reducer 将数据给到 Store，然后 store 给组件就可以了</p> <ul><li>改变数据</li></ul> <p>首先，组件通过 Action Creatures 告诉 Store 需要修改数据，Store 不知道组件需要怎样修改数据，它告诉 Reducers ，Reducers 将数据给到 Store ，然后 Store 对数据进行修改。</p> <h2 id="使用-antd-实现-todolist-的布局"><a href="#使用-antd-实现-todolist-的布局" class="header-anchor">#</a> 使用 AnTd 实现 Todolist 的布局</h2> <ul><li><a href="https://ant.design/index-cn" target="_blank" rel="noopener noreferrer">AntDesign 官网<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>安装 AntD： <code>yarn add antd</code></li></ul> <p>放入输入框，按钮，列表：</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'antd/dist/antd.css'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Input<span class="token punctuation">,</span> Button<span class="token punctuation">,</span> List <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string">'Racing car sprays burning fuel into crowd.'</span><span class="token punctuation">,</span>
    <span class="token string">'Japanese princess to wed commoner.'</span><span class="token punctuation">,</span>
    <span class="token string">'Australian walks 100km after outback crash.'</span><span class="token punctuation">,</span>
    <span class="token string">'Man charged over missing wedding girl.'</span><span class="token punctuation">,</span>
    <span class="token string">'Los Angeles battles huge wildfires.'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">MyTodo</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token punctuation">{</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>marginLeft<span class="token punctuation">:</span> <span class="token string">'10px'</span><span class="token punctuation">,</span> marginTop<span class="token punctuation">:</span> <span class="token string">'10px'</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>todo info<span class="token punctuation">&quot;</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>width<span class="token punctuation">:</span> <span class="token string">'300px'</span><span class="token punctuation">,</span> marginRight<span class="token punctuation">:</span> <span class="token string">'10px'</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span><span class="token plain-text">
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">提交</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List</span></span>
                    <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>marginTop<span class="token punctuation">:</span> <span class="token string">'10px'</span><span class="token punctuation">,</span> width<span class="token punctuation">:</span> <span class="token string">'300px'</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
                    <span class="token attr-name">header</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Header</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span></span>
                    <span class="token attr-name">footer</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Footer</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span></span>
                    <span class="token attr-name">bordered</span>
                    <span class="token attr-name">dataSource</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>data<span class="token punctuation">}</span></span>
                    <span class="token attr-name">renderItem</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                            </span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token plain-text">
                        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">List.Item</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token punctuation">)</span><span class="token punctuation">}</span></span>
                <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> MyTodo<span class="token punctuation">;</span>
</code></pre></div><p>对于 AntD 的学习，和学习 BootStrap 方法相似，仔细阅读文档，copy 对应代码调试即可。</p> <p>需要说明几个注意要点：</p> <ul><li>AntD 组件在使用前需要引入，然后使用时<strong>首字母要大写</strong></li> <li>AntD 组件使用内联的方式表示样式，需要使用写成下面的方式</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code>style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>xxxAAA<span class="token punctuation">:</span> <span class="token string">'20px'</span><span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token comment">// 2 个中括号</span>
</code></pre></div><h2 id="创建-redux-中的-store"><a href="#创建-redux-中的-store" class="header-anchor">#</a> 创建 Redux 中的 store</h2> <p>在使用 Redux 之前，需要安装 Redux： <code>yarn add redux</code></p> <h3 id="创建公共数据存储仓库"><a href="#创建公共数据存储仓库" class="header-anchor">#</a> 创建公共数据存储仓库</h3> <p>首先，创建文件夹 store，在其里面创建文件 <code>index.js</code> ，代码如下：</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> createStore <span class="token keyword">from</span> <span class="token string">'redux'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> store<span class="token punctuation">;</span>
</code></pre></div><p>上面的操作，形象的比喻为创建一个图书管理员，而图书管理员要管理书籍信息，还需要一个“笔记本”（图书清单）</p> <h3 id="创建-reducer-笔记本"><a href="#创建-reducer-笔记本" class="header-anchor">#</a> 创建 Reducer  笔记本</h3> <p>在 store 文件夹下创建文件 <code>reducer.js</code> 文件</p> <p>然后，我们把数据写进去：</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">const</span> defaultState <span class="token operator">=</span> <span class="token punctuation">{</span>
    inputValue<span class="token punctuation">:</span> <span class="token string">'redux test info'</span><span class="token punctuation">,</span>
    list<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token string">'world'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> defaultState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> state<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>说明下 state</p> <ul><li>state 比喻为整个图书馆里所有书籍的信息，也可以认为是<strong>公共数据存储仓库的数据</strong></li> <li>reducer 返回的必须是一个函数！上面代码中我们返回了一个匿名函数。</li></ul> <h3 id="把笔记本放在仓库里（管理员手上）"><a href="#把笔记本放在仓库里（管理员手上）" class="header-anchor">#</a> 把笔记本放在仓库里（管理员手上）</h3> <p>准备好了 store 和 reducer 以后，将 reducer 放进 store 里</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> reducer <span class="token keyword">from</span> <span class="token string">'./reducer'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>reducer<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> store<span class="token punctuation">;</span>

</code></pre></div><p>这个时候，store 就有数据了~</p> <p>现在，我们可以把原来 todolist 中的数据换成 store 的数据了，步骤如下：</p> <ul><li><p>引入 store 后，使用 <code>getState()</code> 方法获取 state 中的数据，在 constructor 中完成初始化 state</p></li> <li><p>在 <code>Input</code> 中设置 <code>value</code> 值为 <code>this.state.inputValue</code></p></li> <li><p>在 <code>dataSource</code> 中设置 <code>dataSource={this.state.list}</code></p></li></ul> <p>详细代码如下：</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'antd/dist/antd.css'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Input<span class="token punctuation">,</span> Button<span class="token punctuation">,</span> List <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store/index'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">MyTodo</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token punctuation">{</span>

    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>marginLeft<span class="token punctuation">:</span> <span class="token string">'10px'</span><span class="token punctuation">,</span> marginTop<span class="token punctuation">:</span> <span class="token string">'10px'</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>inputValue<span class="token punctuation">}</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>todo info<span class="token punctuation">&quot;</span></span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>width<span class="token punctuation">:</span> <span class="token string">'300px'</span><span class="token punctuation">,</span> marginRight<span class="token punctuation">:</span> <span class="token string">'10px'</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span><span class="token plain-text">
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">提交</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List</span></span>
                    <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>marginTop<span class="token punctuation">:</span> <span class="token string">'10px'</span><span class="token punctuation">,</span> width<span class="token punctuation">:</span> <span class="token string">'300px'</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
                    <span class="token attr-name">header</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Header</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span></span>
                    <span class="token attr-name">footer</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Footer</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span></span>
                    <span class="token attr-name">bordered</span>
                    <span class="token attr-name">dataSource</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">}</span></span>
                    <span class="token attr-name">renderItem</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                            </span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token plain-text">
                        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">List.Item</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token punctuation">)</span><span class="token punctuation">}</span></span>
                <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> MyTodo<span class="token punctuation">;</span>
</code></pre></div><p>效果为：</p> <p><img src="data:image/png;base64,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" alt="1561545424806"></p> <h2 id="action-和-reducer-的编写"><a href="#action-和-reducer-的编写" class="header-anchor">#</a> Action 和 Reducer 的编写</h2> <p>编写之前，我们需要安装一个 Chrome 插件 <a href="https://chrome.google.com/webstore/detail/redux-devtools/lmhkpmbekcpmknklioeibfkpmmfibljd?utm_source=chrome-ntp-icon" target="_blank" rel="noopener noreferrer">Redux-devTools<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>然后，我们打开 Chrome 开发者工具，对插件进行一些配置，点击该 <a href="https://github.com/zalmoxisus/redux-devtools-extension#usage" target="_blank" rel="noopener noreferrer">链接<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><img src="/assets/img/1561545823340.e1d60507.png" alt="1561545823340"></p> <p>在该链接中，把如下代码放进 <code>./store/index.js</code> 中</p> <p><img src="/assets/img/1561545972492.e3d4c77c.png" alt="1561545972492"></p> <p>代码为：</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> reducer <span class="token keyword">from</span> <span class="token string">'./reducer'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>
    reducer<span class="token punctuation">,</span> 
    window<span class="token punctuation">.</span>__REDUX_DEVTOOLS_EXTENSION__ <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span><span class="token function">__REDUX_DEVTOOLS_EXTENSION__</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> store<span class="token punctuation">;</span>
</code></pre></div><p>这个时候，我们再次打开面板：</p> <p><img src="/assets/img/1561546114316.aba153b0.png" alt="1561546114316"></p> <p>我们就可以看到相关信息了</p> <p>前面，我们学习了组件如何从 store 获取数据的方法，下面，我们来介绍<strong>组件改变 store 数据，同时同步更新的方法。</strong></p> <p>需求：当从 input 输入内容时，我们要改变 store 的数据，为此，我们需要先设置 action。</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'antd/dist/antd.css'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Input<span class="token punctuation">,</span> Button<span class="token punctuation">,</span> List <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store/index'</span><span class="token punctuation">;</span>


<span class="token keyword">class</span> <span class="token class-name">MyTodo</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>handleInputChange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleInputChange</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>marginLeft<span class="token punctuation">:</span> <span class="token string">'10px'</span><span class="token punctuation">,</span> marginTop<span class="token punctuation">:</span> <span class="token string">'10px'</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input</span></span>
                        <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>inputValue<span class="token punctuation">}</span></span>
                        <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>todo info<span class="token punctuation">&quot;</span></span>
                        <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>width<span class="token punctuation">:</span> <span class="token string">'300px'</span><span class="token punctuation">,</span> marginRight<span class="token punctuation">:</span> <span class="token string">'10px'</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
                        <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleInputChange<span class="token punctuation">}</span></span>
                    <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">提交</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List</span></span>
                    <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>marginTop<span class="token punctuation">:</span> <span class="token string">'10px'</span><span class="token punctuation">,</span> width<span class="token punctuation">:</span> <span class="token string">'300px'</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
                    <span class="token attr-name">header</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Header</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span></span>
                    <span class="token attr-name">footer</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Footer</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span></span>
                    <span class="token attr-name">bordered</span>
                    <span class="token attr-name">dataSource</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">}</span></span>
                    <span class="token attr-name">renderItem</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                            </span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token plain-text">
                        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">List.Item</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token punctuation">)</span><span class="token punctuation">}</span></span>
                <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">handleInputChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token punctuation">{</span>
            type<span class="token punctuation">:</span> <span class="token string">'change_input_value'</span><span class="token punctuation">,</span>
            value<span class="token punctuation">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
        <span class="token punctuation">}</span>
        store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> MyTodo<span class="token punctuation">;</span>
</code></pre></div><p>核心代码：</p> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token operator">&lt;</span>Input
     value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>inputValue<span class="token punctuation">}</span>
     placeholder<span class="token operator">=</span><span class="token string">&quot;todo info&quot;</span>
     style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>width<span class="token punctuation">:</span> <span class="token string">'300px'</span><span class="token punctuation">,</span> marginRight<span class="token punctuation">:</span> <span class="token string">'10px'</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
     onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleInputChange<span class="token punctuation">}</span>
     <span class="token operator">/</span><span class="token operator">&gt;</span>
      
      
<span class="token function">handleInputChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token punctuation">{</span>
            type<span class="token punctuation">:</span> <span class="token string">'change_input_value'</span><span class="token punctuation">,</span>
            value<span class="token punctuation">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
        <span class="token punctuation">}</span>
        store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>主要说明：</p> <ul><li><code>const action</code> 是定义一个 action 对象，type 表示这个 action 做什么事（描述动作），value 表示设置 value 的值为输入框中的值</li> <li><code>store.dispatch(action)</code> 既然动作已经描述完成了（要修改数据的动作设置完成），接下来就要告诉 store 进行 action 的设置了，方式为通过 <code>dispatch()</code> 方法将组件的 action 提交给 store</li></ul> <p>接下来，数据管理员（store）要进行数据修改，但是它不知道怎么修改，所以它将现存的数据 <code>previousState</code> 和 前面组件提交过来的 <code>action</code> <strong>自动转发给</strong> <code>reducer</code></p> <p>此时，<code>reducer</code> 接收到数据和 action 以后，对数据进行处理，然后给 store 返回一个新的 <code>state</code></p> <p>这个时候，我们来看 <code>reducer.js</code> 的代码就很容易理解了：</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">const</span> defaultState <span class="token operator">=</span> <span class="token punctuation">{</span>
    inputValue<span class="token punctuation">:</span> <span class="token string">'redux test info'</span><span class="token punctuation">,</span>
    list<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token string">'world'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>


<span class="token comment">// reducer 可以接收 state ，但是绝不能修改 state</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span>defaultState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'change_input_value'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> newState <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//深拷贝</span>
        newState<span class="token punctuation">.</span>inputValue <span class="token operator">=</span> action<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
        <span class="token keyword">return</span> newState<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> state<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>此时，我们可以在 input 中输入字符，然后打开 Chrome 控制台 Redux 调试工具中 state 进行查看，是否在输入内容的时候该 state 的数据会实时更新。</p> <p>以上，我们完成了 action，store ，reducer 的相关代码编写，也实现了提交 action 时 store 中数据跟随改变，最后一步，就是将改变后的数据渲染到 页面中。</p> <p>步骤分为三步：</p> <ul><li>使用 <code>store.subscribe()</code> 的方式订阅 store 进行数据同步</li> <li>自定义函数 <code>this.handleStateChange</code> ，设置更新后的数据</li></ul> <p>代码如下：</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'antd/dist/antd.css'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Input<span class="token punctuation">,</span> Button<span class="token punctuation">,</span> List <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store/index'</span><span class="token punctuation">;</span>



<span class="token keyword">class</span> <span class="token class-name">MyTodo</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token punctuation">{</span>

    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>handleInputChange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleInputChange</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>handleStateChante <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleStateChante</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        store<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleStateChante<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>marginLeft<span class="token punctuation">:</span> <span class="token string">'10px'</span><span class="token punctuation">,</span> marginTop<span class="token punctuation">:</span> <span class="token string">'10px'</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input</span></span>
                        <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>inputValue<span class="token punctuation">}</span></span>
                        <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>todo info<span class="token punctuation">&quot;</span></span>
                        <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>width<span class="token punctuation">:</span> <span class="token string">'300px'</span><span class="token punctuation">,</span> marginRight<span class="token punctuation">:</span> <span class="token string">'10px'</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
                        <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleInputChange<span class="token punctuation">}</span></span>
                    <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">提交</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List</span></span>
                    <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>marginTop<span class="token punctuation">:</span> <span class="token string">'10px'</span><span class="token punctuation">,</span> width<span class="token punctuation">:</span> <span class="token string">'300px'</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
                    <span class="token attr-name">header</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Header</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span></span>
                    <span class="token attr-name">footer</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Footer</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span></span>
                    <span class="token attr-name">bordered</span>
                    <span class="token attr-name">dataSource</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">}</span></span>
                    <span class="token attr-name">renderItem</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                            </span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token plain-text">
                        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">List.Item</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token punctuation">)</span><span class="token punctuation">}</span></span>
                <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">handleInputChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token punctuation">{</span>
            type<span class="token punctuation">:</span> <span class="token string">'change_input_value'</span><span class="token punctuation">,</span>
            value<span class="token punctuation">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
        <span class="token punctuation">}</span>
        store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token function">handleStateChante</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> MyTodo<span class="token punctuation">;</span>
</code></pre></div><p>这样一来，我们就实现了输入的数据和 store 的数据进行联动。</p> <p>接着，我们继续编写 【点击按钮后将输入框中内容添加到 todoitem 中】，我们再走一遍上面的流程。</p> <ol><li>在 <code>MyToDo.js</code> 中添加点击事件，编写 action ，然后将 action 派发 (dispatch) 到 store 中，核心代码如下：</li></ol> <div class="language-jsx extra-class"><pre class="language-jsx"><code> <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>handleBtnClick <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleBtnClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        store<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleStateChange<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleBtnClick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">提交</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span>
 
 <span class="token function">handleBtnClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token punctuation">{</span>
            type<span class="token punctuation">:</span> <span class="token string">'add_todo_item'</span>
        <span class="token punctuation">}</span>
        store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>在 store 中，store 会将派发过来的 action 自动转发给 reducer</li> <li>在 reducer 中，编写相关代码，修改 state，然后返回给 store</li></ol> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">const</span> defaultState <span class="token operator">=</span> <span class="token punctuation">{</span>
    inputValue<span class="token punctuation">:</span> <span class="token string">'redux test info'</span><span class="token punctuation">,</span>
    list<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token string">'world'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// reducer 可以接收 state ，但是绝不能修改 state</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span>defaultState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'change_input_value'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> newState <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//深拷贝</span>
        newState<span class="token punctuation">.</span>inputValue <span class="token operator">=</span> action<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
        <span class="token keyword">return</span> newState<span class="token punctuation">;</span> <span class="token comment">//该数据返回给到 store 了</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'add_todo_item'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> newState <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//深拷贝</span>
        newState<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>newState<span class="token punctuation">.</span>inputValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
        newState<span class="token punctuation">.</span>inputValue <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> newState<span class="token punctuation">;</span>  <span class="token comment">//该数据返回给到 store 了</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> state<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="4"><li>在 <code>index.js</code> 中，使用 <code>store.subscribe()</code> 从 reducer 中更新后给 store 的 state ，核心代码如下：</li></ol> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
        store<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleStateChange<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
 <span class="token function">handleStateChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>此时，我们打开 redux devTools 工具，进行调试就可以看到变更后的 state 的数据啦</p> <h2 id="使用-redux-完成-todolist-的删除功能"><a href="#使用-redux-完成-todolist-的删除功能" class="header-anchor">#</a> 使用 Redux 完成 TodoList 的删除功能</h2> <p>这一次，我们以编写 TodoList  删除功能的方式来再梳理一下 Redux 的流程</p> <ol><li>给 todoitem 添加事件，出发删除 item 的 action，然后派发（dispatch） 给 store</li></ol> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'antd/dist/antd.css'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Input<span class="token punctuation">,</span> Button<span class="token punctuation">,</span> List <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store/index'</span><span class="token punctuation">;</span>



<span class="token keyword">class</span> <span class="token class-name">MyTodo</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token punctuation">{</span>

    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>handleDeleteItem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleDeleteItem</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        store<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleStateChange<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>marginLeft<span class="token punctuation">:</span> <span class="token string">'10px'</span><span class="token punctuation">,</span> marginTop<span class="token punctuation">:</span> <span class="token string">'10px'</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input</span></span>
                        <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>inputValue<span class="token punctuation">}</span></span>
                        <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>todo info<span class="token punctuation">&quot;</span></span>
                        <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>width<span class="token punctuation">:</span> <span class="token string">'300px'</span><span class="token punctuation">,</span> marginRight<span class="token punctuation">:</span> <span class="token string">'10px'</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
                        <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleInputChange<span class="token punctuation">}</span></span>
                    <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleBtnClick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">提交</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List</span></span>
                    <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>marginTop<span class="token punctuation">:</span> <span class="token string">'10px'</span><span class="token punctuation">,</span> width<span class="token punctuation">:</span> <span class="token string">'300px'</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
                    <span class="token attr-name">bordered</span>
                    <span class="token attr-name">dataSource</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">}</span></span>
                    <span class="token attr-name">renderItem</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List.Item</span></span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleDeleteItem<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                            </span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token plain-text">
                        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">List.Item</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token punctuation">)</span><span class="token punctuation">}</span></span>
                <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">handleDeleteItem</span> <span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token punctuation">{</span>
            type<span class="token punctuation">:</span> <span class="token string">'delete_todo_item'</span><span class="token punctuation">,</span>
            index
        <span class="token punctuation">}</span>
        store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> MyTodo<span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li>store 将派发过来的 action 自动转发给 reducer ，下面，我们需要编写 reducer 来修改数据，然后返回 state 给 store</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> defaultState <span class="token operator">=</span> <span class="token punctuation">{</span>
    inputValue<span class="token punctuation">:</span> <span class="token string">'redux test info'</span><span class="token punctuation">,</span>
    list<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token string">'world'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>


<span class="token comment">// reducer 可以接收 state ，但是绝不能修改 state</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span>defaultState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'delete_todo_item'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> newState <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//深拷贝</span>
        newState<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> newState<span class="token punctuation">;</span>  <span class="token comment">//该数据返回给到 store 了</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> state<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>在 <code>MyToDo.js</code> 文件中，我们要从 store 获得修改后的数据</li></ol> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'antd/dist/antd.css'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Input<span class="token punctuation">,</span> Button<span class="token punctuation">,</span> List <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store/index'</span><span class="token punctuation">;</span>



<span class="token keyword">class</span> <span class="token class-name">MyTodo</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token punctuation">{</span>

    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
        store<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleStateChange<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获得 store 中修改后的数据</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>marginLeft<span class="token punctuation">:</span> <span class="token string">'10px'</span><span class="token punctuation">,</span> marginTop<span class="token punctuation">:</span> <span class="token string">'10px'</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input</span></span>
                        <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>inputValue<span class="token punctuation">}</span></span>
                        <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>todo info<span class="token punctuation">&quot;</span></span>
                        <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>width<span class="token punctuation">:</span> <span class="token string">'300px'</span><span class="token punctuation">,</span> marginRight<span class="token punctuation">:</span> <span class="token string">'10px'</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
                        <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleInputChange<span class="token punctuation">}</span></span>
                    <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
                    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleBtnClick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">提交</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List</span></span>
                    <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>marginTop<span class="token punctuation">:</span> <span class="token string">'10px'</span><span class="token punctuation">,</span> width<span class="token punctuation">:</span> <span class="token string">'300px'</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span>
                    <span class="token attr-name">bordered</span>
                    <span class="token attr-name">dataSource</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">}</span></span>
                    <span class="token attr-name">renderItem</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List.Item</span></span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleDeleteItem<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
                            </span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token plain-text">
                        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">List.Item</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token punctuation">)</span><span class="token punctuation">}</span></span>
                <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
   
    <span class="token function">handleStateChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//获得 store 中修改后的数据</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> MyTodo<span class="token punctuation">;</span>
</code></pre></div><p>这样一来，就大功告成啦~</p> <h2 id="actiontypes-的拆分"><a href="#actiontypes-的拆分" class="header-anchor">#</a> ActionTypes 的拆分</h2> <p>翻车场景再现：</p> <p>在 <code>MyToDo.js</code>  中编写 action 时，代码为：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">handleInputChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token punctuation">{</span>
            type<span class="token punctuation">:</span> <span class="token string">'change_inpvt_value'</span><span class="token punctuation">,</span>
            value<span class="token punctuation">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
        <span class="token punctuation">}</span>
        store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>然后，在 <code>reducer.js</code> 文件中，我们写成了</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> defaultState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'change_input_value'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> newState <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//深拷贝</span>
            newState<span class="token punctuation">.</span>inputValue <span class="token operator">=</span> action<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
            <span class="token keyword">return</span> newState<span class="token punctuation">;</span> <span class="token comment">//该数据返回给到 store 了</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>此时，我们再浏览器中发现，测试有问题，但是 Chrome 中 Redux devTools 工具中又没有显示报错信息，这是什么原因呢？</p> <p>因为粗心：<code>change_inpvt_value</code> 和 <code>change_input_value</code>  拼写错误</p> <p>这种情况，在我们写代码中经常出现，即某个方法的名字拼写错误导致 bug ，但是没有报错信息找 bug 很蛋疼！！这可怎么办？</p> <p>使用 ActionTypes!!!</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">CHANGE_INPUT_VALUE</span> <span class="token operator">=</span> <span class="token string">'change_input_value'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">ADD_TODO_ITEM</span> <span class="token operator">=</span> <span class="token string">'add_todo_item'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">DELETE_TODO_ITEM</span> <span class="token operator">=</span> <span class="token string">'delete_todo_item'</span><span class="token punctuation">;</span>

</code></pre></div><p>然后，分别在 <code>MyTodo.js</code> 和 <code>reducer.js</code> 文件中引入 <code>actionType.js</code> ，接着将原来的 action 中的 type 换成上面的即可</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'antd/dist/antd.css'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Input<span class="token punctuation">,</span> Button<span class="token punctuation">,</span> List <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store/index'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span><span class="token constant">CHANGE_INPUT_VALUE</span><span class="token punctuation">,</span> <span class="token constant">ADD_TODO_ITEM</span><span class="token punctuation">,</span> <span class="token constant">DELETE_TODO_ITEM</span><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./store/actionTypes'</span><span class="token punctuation">;</span>



<span class="token keyword">class</span> <span class="token class-name">MyTodo</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token punctuation">{</span>

    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
    
    <span class="token function">handleInputChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token punctuation">{</span>
            type<span class="token punctuation">:</span> <span class="token constant">CHANGE_INPUT_VALUE</span><span class="token punctuation">,</span>
            value<span class="token punctuation">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
        <span class="token punctuation">}</span>
        store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">handleStateChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">handleBtnClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token punctuation">{</span>
            type<span class="token punctuation">:</span> <span class="token constant">ADD_TODO_ITEM</span>
        <span class="token punctuation">}</span>
        store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">handleDeleteItem</span> <span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token punctuation">{</span>
            type<span class="token punctuation">:</span> <span class="token constant">DELETE_TODO_ITEM</span><span class="token punctuation">,</span>
            index
        <span class="token punctuation">}</span>
        store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> MyTodo<span class="token punctuation">;</span>
</code></pre></div><p><code>reducer.js</code> 文件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span><span class="token constant">CHANGE_INPUT_VALUE</span><span class="token punctuation">,</span> <span class="token constant">ADD_TODO_ITEM</span><span class="token punctuation">,</span> <span class="token constant">DELETE_TODO_ITEM</span><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./actionTypes'</span><span class="token punctuation">;</span>


<span class="token keyword">const</span> defaultState <span class="token operator">=</span> <span class="token punctuation">{</span>
   inputValue<span class="token punctuation">:</span> <span class="token string">'redux test info'</span><span class="token punctuation">,</span>
   list<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token string">'world'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>


<span class="token comment">// reducer 可以接收 state ，但是绝不能修改 state</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span>defaultState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token constant">CHANGE_INPUT_VALUE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token constant">ADD_TODO_ITEM</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token constant">DELETE_TODO_ITEM</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token comment">// ...</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">return</span> state<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这样，我们就完成了对 ActionTypes的拆分，虽然，这种方式新增了一个文件，而且对于代码逻辑也不太好找，但是它却有一个很大好处。</p> <p>当我们把 MyTodo.js 文件中的 Action 的 Types 拼写错了的时候</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token constant">CHANGE_INPVT_VALUE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>浏览器报错情况如下：</p> <p><img src="/assets/img/1561646103218.438892d9.png" alt="1561646103218"></p> <h2 id="使用-actioncreator-统一创建-action"><a href="#使用-actioncreator-统一创建-action" class="header-anchor">#</a> 使用 ActionCreator 统一创建 action</h2> <p>前面 <code>MyTodo.js</code> 中，我们使用如下方式创建 action ，虽然功能可以实现，但是却是不符合代码规范的：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">handleInputChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token punctuation">{</span>
            type<span class="token punctuation">:</span> <span class="token constant">CHANGE_INPUT_VALUE</span><span class="token punctuation">,</span>
            value<span class="token punctuation">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
        <span class="token punctuation">}</span>
        store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>所有 action ，应该统一进行管理，编写 <code>ActionCreator.js</code> 为</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span><span class="token constant">CHANGE_INPUT_VALUE</span><span class="token punctuation">,</span> <span class="token constant">ADD_TODO_ITEM</span><span class="token punctuation">,</span> <span class="token constant">DELETE_TODO_ITEM</span><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./actionTypes'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getInputChangeAction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    type<span class="token punctuation">:</span> <span class="token constant">CHANGE_INPUT_VALUE</span><span class="token punctuation">,</span>
    value
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getAddItemAction</span> <span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    type<span class="token punctuation">:</span> <span class="token constant">ADD_TODO_ITEM</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getDeleteItemAction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    type<span class="token punctuation">:</span> <span class="token constant">DELETE_TODO_ITEM</span><span class="token punctuation">,</span>
    index
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>然后，在 <code>MyTodo.js</code> 中使用为：</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'antd/dist/antd.css'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Input<span class="token punctuation">,</span> Button<span class="token punctuation">,</span> List <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store/index'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>getInputChangeAction<span class="token punctuation">,</span> getAddItemAction<span class="token punctuation">,</span> getDeleteItemAction<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./store/actionCreators'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">MyTodo</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token punctuation">{</span>

    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
           <span class="token comment">// ...</span>
		<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">handleInputChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> action <span class="token operator">=</span><span class="token function">getInputChangeAction</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">handleStateChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">handleBtnClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token function">getAddItemAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">handleDeleteItem</span> <span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token function">getDeleteItemAction</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
        store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> MyTodo<span class="token punctuation">;</span>
</code></pre></div><h2 id="redux-知识点梳理"><a href="#redux-知识点梳理" class="header-anchor">#</a> Redux 知识点梳理</h2> <h3 id="store-是唯一的"><a href="#store-是唯一的" class="header-anchor">#</a> store 是唯一的</h3> <p>即整个应用中，只有一个 store，在目录 <code>store/index.js</code> 文件中，代码为：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> reducer <span class="token keyword">from</span> <span class="token string">'./reducer'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> window<span class="token punctuation">.</span>__REDUX_DEVTOOLS_EXTENSION__ <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span><span class="token function">__REDUX_DEVTOOLS_EXTENSION__</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> store<span class="token punctuation">;</span>
</code></pre></div><h3 id="只有-store-可以改变自己的内容"><a href="#只有-store-可以改变自己的内容" class="header-anchor">#</a> 只有 store 可以改变自己的内容</h3> <p>前面编写代码中，我们发现，我们修改 state 数据的方法都写在了 <code>reducer.js</code> 中，我们很可能<strong>错误的认为是 reducer 对state 数据进行了修改变更</strong>，实际上并不是。</p> <p>reducer 不能直接修改 state 的数据，这通过前面我们写的代码可以发现：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span><span class="token constant">CHANGE_INPUT_VALUE</span><span class="token punctuation">,</span> <span class="token constant">ADD_TODO_ITEM</span><span class="token punctuation">,</span> <span class="token constant">DELETE_TODO_ITEM</span><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./actionTypes'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> defaultState <span class="token operator">=</span> <span class="token punctuation">{</span>
    inputValue<span class="token punctuation">:</span> <span class="token string">'redux test info'</span><span class="token punctuation">,</span>
    list<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token string">'world'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span>defaultState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>	
    <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token constant">CHANGE_INPUT_VALUE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> newState <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//深拷贝</span>
            newState<span class="token punctuation">.</span>inputValue <span class="token operator">=</span> action<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
            <span class="token keyword">return</span> newState<span class="token punctuation">;</span> <span class="token comment">//该数据返回给到 store 了</span>
        <span class="token punctuation">}</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// 错误写法：</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span>defaultState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>	
    <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token constant">CHANGE_INPUT_VALUE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> newState <span class="token operator">=</span> <span class="token string">'xxx'</span>
            <span class="token keyword">return</span> newState<span class="token punctuation">;</span> <span class="token comment">//该数据返回给到 store 了</span>
        <span class="token punctuation">}</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>reducer 先是将 state 深拷贝出一份，然后在拷贝的数据进行修改，接着，就直接返回该拷贝的数据。</p> <p>最后，是在 store 中对 state 数据进行了修改。</p> <h3 id="reducer-必须是纯函数"><a href="#reducer-必须是纯函数" class="header-anchor">#</a> reducer 必须是纯函数</h3> <blockquote><p>纯函数：给定固定的输入，就一定会有固定的输出，而且不会有任何副作用</p></blockquote> <p>固定的输出——要求</p> <ul><li>不能含有时间的操作</li> <li>不能含有异步的操作</li> <li>不能含有Ajax 的操作</li></ul> <p>不会有副作用——要求</p> <ul><li>不能对原数据进行修改</li></ul> <h3 id="redux-的核心-api"><a href="#redux-的核心-api" class="header-anchor">#</a> Redux 的核心 API</h3> <ul><li><code>createStore</code>创建 store</li> <li><code>store.dispatch</code> 派发 action，将 action 传递给 store</li> <li><code>store.getState()</code> 获取 store 中所有数据内容</li> <li><code>store.subscribe()</code> 订阅 store 的改变，只要 store 的数据发生改变，<code>store.subscribe()</code> 中的回调函数就会被执行</li></ul></div> <!----> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">9/3/2019, 2:32:06 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/blog/react/base/04-React与Ajax和CSSTrainsition的使用.html" class="prev">
          React与ajax和CSSTransition的使用
        </a></span> <span class="next"><a href="/blog/react/base/06-React中间件.html">
          React中间件
        </a>
        →
      </span></p></div> </main> <div class="valine-wrapper" data-v-5029e45b><div id="valine" data-v-5029e45b></div></div></div> <div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;background-color:rgba(231, 234, 241,.5);display:none;" data-v-cd623d78 data-v-cd623d78><i class="iconfont reco-up" data-v-cd623d78></i></div></div></div></div><div class="global-ui"><SWUpdatePopup></SWUpdatePopup></div></div>
    <script src="/assets/js/app.030edb0b.js" defer></script><script src="/assets/js/4.7584c211.js" defer></script><script src="/assets/js/1.868075c3.js" defer></script><script src="/assets/js/13.154fc8e1.js" defer></script>
  </body>
</html>
